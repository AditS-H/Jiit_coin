"use strict";(self.webpackChunkstickers=self.webpackChunkstickers||[]).push([[185],{185:(e,s,n)=>{n.r(s),n.d(s,{default:()=>R,loader:()=>U});const t={pageWrapper:"Share_pageWrapper__PBHH9",container:"Share_container__rFACh",card:"Share_card__L3hPM",name:"Share_name__EBWqN",request:"Share_request__DLjLd",give:"Share_give__452OA",reject:"Share_reject__NGaL7",rejectBtnLoading:"Share_rejectBtnLoading__0T-vA",rotate:"Share_rotate__twHH5",giveBtnLoading:"Share_giveBtnLoading__IfG8W",send_request_container:"Share_send_request_container__K6nsU",requestList:"Share_requestList__jjKyQ",shift:"Share_shift__wdMtX",containerData:"Share_containerData__sJY9x",slide:"Share_slide__+dNBP",show:"Share_show__sOysB",hide_right:"Share_hide_right__oUWTP",hide_left:"Share_hide_left__wI5XP",msg:"Share_msg__aNy2n",success:"Share_success__wReYW",fail:"Share_fail__ZO7N1"};var c=n(420),a=n(838);const i="http://localhost:8080/cancelRequest/";const r=()=>new Promise((e=>{setTimeout(e,3e3)}));var o=n(791),l=n(184);function u(e){let{styles:s}=e;const n=(0,c.v9)((e=>e.share.askedTo));return console.log("OutGoingRequestList myArr : ",n),(0,l.jsx)("div",{className:s.requestList+" myScroll",children:n.map((e=>(0,l.jsxs)("div",{className:s.card,children:[(0,l.jsx)("div",{className:s.name,children:e.name}),(0,l.jsxs)("div",{className:s.request,children:[(0,l.jsxs)("p",{children:["For ",e.coins," ",(0,l.jsx)("img",{src:"/imgs/ethereumGold.png",alt:"",srcset:""})," "]}),(0,l.jsx)(h,{id:e.id,styles:s})]})]},e.id)))})}function h(e){let{id:s,styles:n}=e;console.log("cancel btn id : ",s);const[t,u]=(0,o.useState)(!1),h=(0,c.I0)();return(0,l.jsx)("button",{className:t?n.rejectBtnLoading:n.reject,onClick:t?null:async function(){u(!0);let e=await async function(e){try{let s=localStorage("authToken");if(null==s)return{success:!1,msg:"Login again ..."};const n={method:"POST",body:JSON.stringify({to:e}),headers:{"Content-type":"application/json"}},t=await fetch(i+s,n);return await t.json()}catch(s){return await r(),{success:!1,msg:"Not able to connect Server.. Try Later !"}}}(s);console.log("response aaa gaya : ",e),e.success?(h(a.$h.setMsg({success:!0,msg:"Canceled Request !"})),h(a.N2.cancel(s))):(h(a.$h.setMsg(e)),u(!1))},children:t?null:"Cancel"},"btn"+s)}const d={search_conatiner:"ShareUser_search_conatiner__Yp8K7",search_input_wrapper:"ShareUser_search_input_wrapper__zhpzp",suggestionList:"ShareUser_suggestionList__5pvMT",suggestion:"ShareUser_suggestion__eEh5-",slide:"ShareUser_slide__Z3MyC",show:"ShareUser_show__wWce8",hideLeft:"ShareUser_hideLeft__pAM9u",hideRight:"ShareUser_hideRight__etAjR"},g="http://localhost:8080/search/";function _(){const e=(0,c.I0)(),s=(0,c.v9)((e=>e.askCoins.msg)),n=(0,c.v9)((e=>e.share.askedTo));console.log("msg : ",s);const[t,i]=(0,o.useState)([]),r=(0,o.useRef)();function u(s){e(a.$h.setMsg(s))}function h(s){if(void 0!==s.coins){let t=!1;console.log(s),n.forEach((e=>{e.id==s.id&&(t=!0)})),t?e(a.$h.setMsg({success:!1,msg:"Already sent request to ".concat(s.name)})):(r.current.value="",i([]),e(a.$h.askFrom(s)))}}let _=(0,o.useCallback)(function(e,s){let n;return function(){clearTimeout(n),n=setTimeout((()=>{e()}),s)}}((async function(){let e=r.current.value;if(null!==s&&u(null),e.length>0){let s=await async function(e){try{const s=await fetch(g+e);return s.ok?{success:!0,usersList:await s.json()}:{success:!1,msg:"Not able to connect Server.. Try Later !"}}catch(s){let n=new RegExp(e,"i"),t=await fetch("http://localhost:3000/db/users.json"),c=await t.json();return c=c.filter((e=>n.test(e.name))),{success:!0,usersList:c}}}(e);if(console.log("response : ",s),s.success)s.usersList.length>0?i(s.usersList):i([{name:"No users found..."}]);else{let e=r.current.value;console.log("currentKeyWord : ",e),e.length>0?(u({success:!1,msg:s.msg}),i([{name:"No users found..."}])):i([])}}else i([]);console.log("yessssssssss -0")}),400),[]);return(0,l.jsxs)("div",{id:d.search_conatiner,children:[(0,l.jsx)("div",{id:d.search_input_wrapper,children:(0,l.jsx)("input",{onChange:_,type:"text",id:"userSearch",placeholder:"Search user...",ref:r})}),(0,l.jsx)("div",{id:d.suggestionList,children:t.map((e=>(0,l.jsx)(m,{details:e,clickHandler:h})))})]})}function m(e){let{details:s,clickHandler:n}=e;return(0,l.jsxs)("div",{className:d.suggestion,onClick:()=>n(s),children:[(0,l.jsx)("span",{children:s.name}),void 0!==s.coins?(0,l.jsx)("span",{children:s.coins}):null]})}function j(e){let{styles:s}=e;const n=(0,c.v9)((e=>e.askCoins.msg));return(0,l.jsx)(o.Fragment,{children:null!==n?(0,l.jsx)("p",{className:s.msg+" "+(n.success?s.success:s.fail),children:n.msg}):null})}function f(e){let{styles:s}=e;const n=(0,c.v9)((e=>e.askCoins.comp)),t=(0,c.I0)();return console.log("Comp is : ",n),(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)("p",{onClick:function(){t("sent"==n?a.$h.setComp("search"):a.$h.setComp("sent"))},className:s.shift,children:"sent"==n?"\xab Send a Request":"Requests Sent ! \xbb"}),(0,l.jsx)("h2",{className:s.slide+" "+("sent"==n?s.show:s.hide_left),children:"Requests Sent !"}),(0,l.jsx)("h2",{className:s.slide+" "+("ask"==n||"search"==n?s.show:s.hide_right),children:"Send a Request..."})]})}const p={askUser_container:"AskUser_askUser_container__6Oe5T",counter:"AskUser_counter__Xlklu",totalCoinsToAsk:"AskUser_totalCoinsToAsk__XXO0l",askBtn:"AskUser_askBtn__dwKfy",myBtn:"AskUser_myBtn__t57sf",loadingBtn:"AskUser_loadingBtn__H5vkl",rotate:"AskUser_rotate__+ZKiq"},x="http://localhost:8080/sendCoinRequest/";function k(){const[e,s]=(0,o.useState)(!1),n=(0,c.I0)(),t=(0,o.useRef)(),i=(0,o.useRef)(),r=(0,c.v9)((e=>e.askCoins.userData)),u=(0,c.v9)((e=>e.askCoins.comp)),h=(0,c.v9)((e=>e.askCoins.msg));function d(){n(a.$h.setComp("search"))}return console.log("userData : ",r),"ask"==u&&null==r&&d(),(0,l.jsxs)("div",{id:p.askUser_container,children:[(0,l.jsx)("h2",{children:"Ask From :"}),null==r?null:(0,l.jsx)("h2",{children:r.name}),(0,l.jsx)(y,{coinsSpan:t,btnRef:i}),(0,l.jsx)("button",{className:p.myBtn+" "+(e?p.loadingBtn:p.askBtn),onClick:async function(){let e=t.current.innerText;if(e=parseInt(e),0==e)n(a.$h.setMsg({success:!1,msg:"R U STUPID ?!\ud83d\ude11"}));else{null!==h&&n(a.$h.setMsg(null)),s(!0),console.log(r);let t=await async function(e,s){try{let n=localStorage("authToken");if(null==n)return{success:!1,msg:"Login again ..."};const t={method:"POST",body:JSON.stringify({to:e,coins:s}),headers:{"Content-type":"application/json"}},c=await fetch(x+n,t);return await c.json()}catch(n){return{success:!0}}}(r.id,e);!function(e,t,c){s(!1),e?(n(a.$h.setComp("sent")),n(a.N2.asked({...r,coins:t})),n(a.$h.setMsg({success:!0,msg:"Coins Request Sent !!"}))):n(a.$h.setMsg({success:!1,msg:c}))}(t.success,e,t.msg)}},ref:i,children:e?null:"Ask"}),(0,l.jsxs)("p",{onClick:e?null:d,children:[(0,l.jsx)("span",{children:"\u2190"})," Back"]})]})}function y(e){let{coinsSpan:s}=e;const[n,t]=(0,o.useState)(0),i=(0,c.I0)(),r=(0,c.v9)((e=>e.askCoins.msg));return(0,l.jsxs)("div",{id:p.counter,children:[(0,l.jsx)("button",{onClick:function(){4==n&&null!==r&&i(a.$h.setMsg(null)),n>0&&t((e=>e-1))},children:"-"}),(0,l.jsx)("span",{id:p.totalCoinsToAsk,ref:s,children:n}),(0,l.jsx)("button",{onClick:function(){n<5?t((e=>e+1)):i(a.$h.setMsg({success:!1,msg:"Can't ask more then 5 coins !"}))},children:"+"})]})}function S(e){let{styles:s}=e;return console.log("OutGoingRequestContainer"),(0,l.jsxs)("div",{className:s.container,children:[(0,l.jsx)(j,{styles:s}),(0,l.jsx)(f,{styles:s}),(0,l.jsx)(v,{madeFor:"sent",styles:s,children:(0,l.jsx)(u,{styles:s})}),(0,l.jsx)(v,{madeFor:"search",styles:s,children:(0,l.jsx)(_,{})}),(0,l.jsx)(v,{madeFor:"ask",styles:s,children:(0,l.jsx)(k,{})})]})}function v(e){let{madeFor:s,children:n,styles:t}=e;const a=(0,c.v9)((e=>e.askCoins.comp));let i;return console.log("comp ab : ",a),"sent"==s&&(i=t.hide_left),"search"==s&&(i=t.hide_right),"ask"==s&&(i=t.hide_right),(0,l.jsx)("div",{className:t.containerData+" "+t.slide+" "+(a==s?t.show:i),children:n})}const C="http://localhost:8080/decision/";const N=()=>new Promise((e=>{setTimeout(e,3e3)}));function w(e){let{styles:s}=e;return console.log("IncomingReqestConatiner"),(0,l.jsxs)("div",{className:s.container,children:[(0,l.jsx)("h2",{children:"Incoming Stickers Requests"}),(0,l.jsx)(L,{styles:s}),(0,l.jsx)(q,{styles:s})]})}function L(e){let{styles:s}=e;const n=(0,c.v9)((e=>e.share.giveMsg));return(0,l.jsx)(o.Fragment,{children:null==n?null:(0,l.jsx)("p",{className:s.msg+" "+(n.success?s.success:s.fail),children:n.msg})})}function q(e){let{styles:s}=e;const n=(0,c.v9)((e=>e.share.giveTo));return(0,l.jsx)("div",{className:s.requestList+" myScroll",children:n.map((e=>(0,l.jsxs)("div",{className:s.card,children:[(0,l.jsx)("div",{className:s.name,children:e.name}),(0,l.jsx)("div",{className:s.request,children:(0,l.jsx)(T,{styles:s,name:e.name,id:e.id,coins:e.coins})})]},"card"+e.id)))})}function T(e){let{styles:s,id:n,coins:t,name:i}=e;const r=(0,c.I0)(),[u,h]=(0,o.useState)(null);async function d(e){h(e);let s=await async function(e,s){try{let n=localStorage("authToken");if(null==n)return{success:!1,msg:"Login again ..."};const t={method:"POST",body:JSON.stringify({decision:e,to:s}),headers:{"Content-type":"application/json"}},c=await fetch(C+n,t);return await c.json()}catch(n){return await N(),{success:!0}}}("give"==e,n);if(s.success){let s;s="give"==e?"".concat(t," coins given to ").concat(i,"!"):"".concat(t," coins denied to ").concat(i,"!"),r(a.N2.giveSetMsg({success:!0,msg:s})),r(a.N2.decision(n))}else r(a.N2.giveSetMsg(s))}return(0,l.jsxs)(o.Fragment,{children:["give"==u?(0,l.jsx)("button",{className:s.giveBtnLoading},"give"+n):(0,l.jsxs)("button",{className:s.give,onClick:()=>d("give"),children:["Give ",t," ",(0,l.jsx)("img",{src:"/imgs/ethereumGold.png",alt:"",srcset:""})]},"give"+n),"reject"==u?(0,l.jsx)("button",{className:s.rejectBtnLoading},"reject"+n):(0,l.jsx)("button",{className:s.reject,onClick:()=>d("reject"),children:"Reject"},"reject"+n)]})}function R(){return(0,l.jsxs)("div",{className:t.pageWrapper,children:[(0,l.jsx)(w,{styles:t}),(0,l.jsx)(S,{styles:t})]})}function U(){return console.log("loader function of Share page"),null}}}]);
//# sourceMappingURL=185.bc584675.chunk.js.map